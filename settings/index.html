<!doctype html>
<html>
    <head>
        <script type="text/javascript" src="/homey.js" data-origin="settings"></script>
    </head>
    <body>
        <h1 data-i18n="settings.title"></h1>
        <p data-i18n="settings.subtitle"></p>

        <fieldset>
            <legend>Settings</legend>
            <div class="field row">
                <label for="region">Region</label><br/>
                <select id="region">
                  <option value="eu">Europe</option>
                  <option value="na">North America</option>
                  <option value="cn">China</option>
                </select>
            </div>
        </fieldset>

        <button id="save" class="right">Save changes</button>

        <script type="text/javascript">

        // a method named 'onHomeyReady' must be present in your code
        function onHomeyReady( Homey ){

            // Tell Homey we're ready to be displayed
            Homey.ready();

            var regionElement = document.getElementById('region');
            var saveElement = document.getElementById('save');

            Homey.get('region', function( err, region ) {
               if( err ) return Homey.alert( err );
               regionElement.value = region;
            });

            saveElement.addEventListener('click', function(e) {

                Homey.set('region', regionElement.value, function( err ){
                    if( err ) return Homey.alert( err );
                });

            });
        }
        </script>

    </body>
</html>
